<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ordenar Frases</title>
    <style>
        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: -10px;
        }
        .deposito {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            grid-template-rows: repeat(4, 1fr);
            gap: 10px;
            width: 80%;
            min-height: 150px;
            padding: 10px;
            border: 2px dashed #999;
            margin-top: -10px;
            justify-content: center;
        }
        .workspace {
            width: 40cm;
            height: 20cm;
            border: 2px solid black;
            background-color: #f0f0f0;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
            position: relative;
        }
        .phrase {
            padding: 10px;
            background-color: lightblue;
            cursor: grab;
            user-select: none;
            border: 1px solid #000;
            text-align: center;
            width: auto;
            min-width: 100px;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            word-wrap: break-word;
            position: absolute;
        }
        .grid {
            display: flex;
            margin-top: -1px;
        }
        .column {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: -30px;
        }
        .slot {
            width: 130px;
            height: 90px;
            border: 2px solid #ccc;
            margin: 1px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f9f9f9;
            font-size: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>Frases a ordenar</h2>
        <div class="deposito" id="deposito"></div>

        <h2>Espacio de Trabajo</h2>
        <div class="workspace" id="workspace"></div>

        <h2>Grilla de Ordenación</h2>
        <div class="grid" id="grid"></div>
    </div>

    <script>
        const frases = [
            "La innovación es el resultado de la transferencia de tecnología de expertos a productores",
            "Los productores para innovar necesitan recibir las tecnologías generadas por especialistas y empresas",
            "Para innovar, es necesario debatir y pensar junto con personas que tengan distintas ideas y puntos de vista sobre el asunto",
            "Los productores adecuan las tecnologías disponibles para que les resulten útiles a su situación"
        ];

        const deposito = document.getElementById("deposito");
        const workspace = document.getElementById("workspace");
        const grid = document.getElementById("grid");

        function crearFraseElement(text) {
            const div = document.createElement("div");
            div.classList.add("phrase");
            div.draggable = true;
            div.textContent = text;
            div.style.left = "0px";
            div.style.top = "0px";

            div.addEventListener("dragstart", dragStart);
            div.addEventListener("dragend", dragEnd);
            div.addEventListener("mousedown", mouseDown);
            
            return div;
        }

        frases.forEach(frase => {
            deposito.appendChild(crearFraseElement(frase));
        });

        function dragStart(event) {
            event.dataTransfer.setData("text", event.target.textContent);
            event.target.classList.add("dragging");
        }

        function dragEnd(event) {
            event.target.classList.remove("dragging");
        }

        function mouseDown(event) {
            const element = event.target;
            let shiftX = event.clientX - element.getBoundingClientRect().left;
            let shiftY = event.clientY - element.getBoundingClientRect().top;

            function moveAt(pageX, pageY) {
                element.style.left = pageX - shiftX + "px";
                element.style.top = pageY - shiftY + "px";
            }

            function onMouseMove(event) {
                moveAt(event.pageX, event.pageY);
            }

            document.addEventListener("mousemove", onMouseMove);

            element.onmouseup = function() {
                document.removeEventListener("mousemove", onMouseMove);
                element.onmouseup = null;
            };
        }

        function dragOver(event) {
            event.preventDefault();
        }

        function drop(event) {
            event.preventDefault();
            const text = event.dataTransfer.getData("text");
            const draggedElement = document.querySelector(".dragging");

            if (event.target.classList.contains("slot") && !event.target.firstChild) {
                event.target.appendChild(draggedElement);
            }
        }

        workspace.addEventListener("dragover", dragOver);
        workspace.addEventListener("drop", drop);
    </script>
</body>
</html>
